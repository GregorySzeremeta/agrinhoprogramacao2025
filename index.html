<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Esta√ß√£o da Terra</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>Esta√ß√£o da Terra</h1>
    <nav class="menu-navegacao" role="navigation" aria-label="Menu principal">
      <button id="btn-loja" aria-label="Ir para Loja" class="menu-btn">Loja</button>
      <button id="btn-contato" aria-label="Ir para Contato" class="menu-btn">Contato</button>
      <button id="btn-sobre" aria-label="Ir para Sobre" class="menu-btn">Sobre</button>
      <button id="btn-carrinho" aria-label="Ir para Carrinho" class="menu-btn">Carrinho</button>
      <button id="botao-acessibilidade" aria-haspopup="true" aria-expanded="false" aria-controls="menu-acessibilidade" class="menu-btn">Acessibilidade</button>
      <button id="btn-libras" aria-label="Abrir v√≠deo de Libras" class="menu-btn">LIBRAS</button>
    </nav>
  </header>

  <!-- Menu acessibilidade -->
  <div id="menu-acessibilidade" class="menu-acessibilidade" aria-hidden="true" style="display:none;">
    <button id="btn-aumentar-fonte" aria-label="Aumentar fonte">A+</button>
    <button id="btn-diminuir-fonte" aria-label="Diminuir fonte">A-</button>
    <button id="btn-modo-escuro" aria-label="Alternar modo escuro">üåô</button>
  </div>

  <!-- Video Libras -->
  <div id="modal-libras" class="modal-libras" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="titulo-libras" style="display:none;">
    <div class="modal-content">
      <h2 id="titulo-libras">V√≠deo explicativo em Libras</h2>
      <video controls width="320" aria-describedby="descricao-video">
        <source src="libras-video.mp4" type="video/mp4" />
        Seu navegador n√£o suporta v√≠deo em HTML5.
      </video>
      <p id="descricao-video">V√≠deo explicando o conte√∫do do site em L√≠ngua Brasileira de Sinais.</p>
      <button id="btn-fechar-libras" aria-label="Fechar v√≠deo Libras">Fechar</button>
    </div>
  </div>

  <!-- Se√ß√µes -->
  <main>
    <!-- Loja -->
    <section id="loja" tabindex="0" aria-label="Se√ß√£o de loja" class="secao ativa">
      <h2>Loja</h2>
      <div class="produtos-grid" aria-live="polite" aria-relevant="additions">
        <!-- Produtos ser√£o inseridos via JS -->
      </div>
    </section>

    <!-- Contato -->
    <section id="contato" tabindex="0" aria-label="Formul√°rio de contato" class="secao" style="display:none;">
      <h2>Contato</h2>
      <form id="form-contato">
        <label for="nome">Nome:</label>
        <input type="text" id="nome" name="nome" required aria-required="true" />
        <label for="email">Email:</label>
        <input type="email" id="email" name="email" required aria-required="true" />
        <label for="mensagem">Mensagem:</label>
        <textarea id="mensagem" name="mensagem" required aria-required="true"></textarea>
        <button type="submit" aria-label="Enviar mensagem de contato">Enviar</button>
      </form>
      <div id="resposta-contato" aria-live="polite" style="margin-top: 1rem;"></div>
    </section>

    <!-- Sobre -->
    <section id="sobre" tabindex="0" aria-label="Informa√ß√µes sobre a Esta√ß√£o da Terra" class="secao" style="display:none;">
      <h2>Sobre</h2>
      <p>Bem-vindo √† Esta√ß√£o da Terra, seu marketplace sustent√°vel e interativo, que conecta o campo √† cidade, colhendo oportunidades para todos.</p>
      <p>Nossa miss√£o √© promover produtos frescos, org√¢nicos e de qualidade, valorizando o produtor local e incentivando pr√°ticas sustent√°veis.</p>
      <p>Junte-se a n√≥s e fa√ßa parte desse movimento verde!</p>
    </section>

    <!-- Carrinho -->
    <section id="carrinho" tabindex="0" aria-label="Carrinho de compras" class="secao" style="display:none;">
      <h2>Seu Carrinho</h2>
      <ul id="lista-carrinho" aria-live="polite" aria-relevant="all" tabindex="0"></ul>
      <p id="total-carrinho">Total: R$ 0,00</p>
      <button id="btn-esvaziar-carrinho" aria-label="Esvaziar carrinho">Esvaziar Carrinho</button>
      <button id="btn-finalizar-compra" aria-label="Finalizar compra">Finalizar Compra</button>
    </section>
  </main>

  <footer>
    <p>¬© 2025 Esta√ß√£o da Terra - Todos os direitos reservados</p>
  </footer>

  <script>
    // Produtos: array com 20 produtos
    const produtos = [
     {nome: "Ma√ß√£", preco: 4.50, img: "https://i.imgur.com/9rY5EIG.png"},
    {nome: "Banana", preco: 3.20, img: "https://i.imgur.com/cvVrtqL.png"},
    {nome: "Laranja", preco: 3.80, img: "https://i.imgur.com/FCkAA8z.png"},
    {nome: "Melancia", preco: 7.50, img: "https://i.imgur.com/pqjf3Df.png"},
    {nome: "Alface", preco: 2.80, img: "https://i.imgur.com/GcHvUzz.png"},
    {nome: "Tomate", preco: 3.60, img: "https://i.imgur.com/nAHBmvF.png"},
    {nome: "Cenoura", preco: 2.90, img: "https://i.imgur.com/Hx1GlW5.png"},
    {nome: "Batata", preco: 3.00, img: "https://i.imgur.com/ooGjrxJ.png"},
    {nome: "Cebola", preco: 2.50, img: "https://i.imgur.com/vGJeH1g.png"},
    {nome: "Mel", preco: 15.00, img: "https://i.imgur.com/ZHU3EBE.png"},
    {nome: "Queijo", preco: 25.00, img: "https://i.imgur.com/kRUjPae.png"},
    {nome: "Leite", preco: 4.00, img: "https://i.imgur.com/txvSEvF.png"},
    {nome: "Arroz", preco: 8.00, img: "https://i.imgur.com/1JqXPvE.png"},
    {nome: "Feij√£o", preco: 7.20, img: "https://i.imgur.com/jqTGP2g.png"},
    {nome: "P√£o", preco: 5.00, img: "https://i.imgur.com/OZMXPLm.png"},
    {nome: "Ovos", preco: 10.00, img: "https://i.imgur.com/2ww0VsG.png"},
    {nome: "Caf√©", preco: 20.00, img: "https://i.imgur.com/VKX0D5y.png"},
    {nome: "Azeite", preco: 18.00, img: "https://i.imgur.com/FGeC7Sw.png"},
    {nome: "Mel√£o", preco: 6.50, img: "https://i.imgur.com/odFhM8h.png"},
    {nome: "Morango", preco: 12.00, img: "https://i.imgur.com/KKDCQhu.png"}
    ];

    const produtosGrid = document.querySelector(".produtos-grid");
    const carrinhoItens = [];

    // Renderizar produtos
    function renderizarProdutos() {
      produtosGrid.innerHTML = "";
      produtos.forEach((produto, index) => {
        const div = document.createElement("div");
        div.className = "produto";

        div.innerHTML = `
          <h3>${produto.nome}</h3>
          <p>R$ ${produto.preco.toFixed(2)}</p>
          <button class="btn-add" aria-label="Adicionar ${produto.nome} ao carrinho" data-index="${index}">Adicionar</button>
        `;
        produtosGrid.appendChild(div);
      });
    }

    renderizarProdutos();

    // Atualizar carrinho
    const listaCarrinho = document.getElementById("lista-carrinho");
    const totalCarrinho = document.getElementById("total-carrinho");

    function atualizarCarrinho() {
      listaCarrinho.innerHTML = "";
      let total = 0;

      carrinhoItens.forEach((item, idx) => {
        total += item.preco * item.quantidade;
        const li = document.createElement("li");
        li.tabIndex = 0;
        li.innerHTML = `
          ${item.nome} - R$ ${item.preco.toFixed(2)} x ${item.quantidade}
          <button aria-label="Remover um ${item.nome} do carrinho" data-index="${idx}" class="btn-remover">Remover</button>
        `;
        listaCarrinho.appendChild(li);
      });

      totalCarrinho.textContent = `Total: R$ ${total.toFixed(2)}`;
      if(carrinhoItens.length === 0){
        listaCarrinho.innerHTML = "<li>Seu carrinho est√° vazio.</li>";
      }

      // Adicionar evento remover aos bot√µes rec√©m criados
      document.querySelectorAll(".btn-remover").forEach(botao => {
        botao.addEventListener("click", (e) => {
          const idx = parseInt(e.target.getAttribute("data-index"));
          if (carrinhoItens[idx].quantidade > 1) {
            carrinhoItens[idx].quantidade--;
          } else {
            carrinhoItens.splice(idx, 1);
          }
          atualizarCarrinho();
        });
      });
    }

    // Adicionar produto ao carrinho
    produtosGrid.addEventListener("click", (e) => {
      if (e.target.classList.contains("btn-add")) {
        const index = parseInt(e.target.getAttribute("data-index"));
        const produto = produtos[index];
        const itemExistente = carrinhoItens.find(item => item.nome === produto.nome);
        if (itemExistente) {
          itemExistente.quantidade++;
        } else {
          carrinhoItens.push({...produto, quantidade: 1});
        }
        alert(`${produto.nome} adicionado ao carrinho!`);
        atualizarCarrinho();
      }
    });

    // Bot√µes menu
    const btnLoja = document.getElementById("btn-loja");
    const btnContato = document.getElementById("btn-contato");
    const btnSobre = document.getElementById("btn-sobre");
    const btnCarrinho = document.getElementById("btn-carrinho");

    const loja = document.getElementById("loja");
    const contato = document.getElementById("contato");
    const sobre = document.getElementById("sobre");
    const carrinho = document.getElementById("carrinho");

    function esconderTodasSecoes() {
      [loja, contato, sobre, carrinho].forEach(secao => {
        secao.style.display = "none";
        secao.classList.remove("ativa");
      });
    }

    btnLoja.addEventListener("click", () => {
      esconderTodasSecoes();
      loja.style.display = "block";
      loja.classList.add("ativa");
      loja.focus();
    });
    btnContato.addEventListener("click", () => {
      esconderTodasSecoes();
      contato.style.display = "block";
      contato.classList.add("ativa");
      contato.focus();
    });
    btnSobre.addEventListener("click", () => {
      esconderTodasSecoes();
      sobre.style.display = "block";
      sobre.classList.add("ativa");
      sobre.focus();
    });
    btnCarrinho.addEventListener("click", () => {
      esconderTodasSecoes();
      carrinho.style.display = "block";
      carrinho.classList.add("ativa");
      carrinho.focus();
      atualizarCarrinho();
    });

    // Inicializa com loja vis√≠vel
    esconderTodasSecoes();
    loja.style.display = "block";
    loja.classList.add("ativa");

    // Acessibilidade - menu
    const botaoAcessibilidade = document.getElementById("botao-acessibilidade");
    const menuAcessibilidade = document.getElementById("menu-acessibilidade");
    botaoAcessibilidade.addEventListener("click", () => {
      const expanded = botaoAcessibilidade.getAttribute("aria-expanded") === "true";
      botaoAcessibilidade.setAttribute("aria-expanded", !expanded);
      if(menuAcessibilidade.style.display === "none" || menuAcessibilidade.style.display === "") {
        menuAcessibilidade.style.display = "block";
        menuAcessibilidade.setAttribute("aria-hidden", "false");
      } else {
        menuAcessibilidade.style.display = "none";
        menuAcessibilidade.setAttribute("aria-hidden", "true");
      }
    });

    // Aumentar e diminuir fonte
    const btnAumentarFonte = document.getElementById("btn-aumentar-fonte");
    const btnDiminuirFonte = document.getElementById("btn-diminuir-fonte");
    btnAumentarFonte.addEventListener("click", () => {
      let currentSize = parseFloat(window.getComputedStyle(document.body).fontSize);
      if(currentSize < 30){
        document.body.style.fontSize = (currentSize + 2) + "px";
      }
    });
    btnDiminuirFonte.addEventListener("click", () => {
      let currentSize = parseFloat(window.getComputedStyle(document.body).fontSize);
      if(currentSize > 12){
        document.body.style.fontSize = (currentSize - 2) + "px";
      }
    });

    // Modo escuro
    const btnModoEscuro = document.getElementById("btn-modo-escuro");
    btnModoEscuro.addEventListener("click", () => {
      document.body.classList.toggle("modo-escuro");
    });

    // Esvaziar carrinho
    document.getElementById("btn-esvaziar-carrinho").addEventListener("click", () => {
      carrinhoItens.length = 0;
      atualizarCarrinho();
    });

    // Finalizar compra
    document.getElementById("btn-finalizar-compra").addEventListener("click", () => {
      if(carrinhoItens.length === 0){
        alert("Seu carrinho est√° vazio!");
        return;
      }
      // Aqui redireciona para p√°gina de pagamento
      window.location.href = "pagamento.html";
    });

    // Formul√°rio contato
    const formContato = document.getElementById("form-contato");
    const respostaContato = document.getElementById("resposta-contato");
    formContato.addEventListener("submit", (e) => {
      e.preventDefault();
      respostaContato.textContent = "Mensagem enviada com sucesso! Obrigado pelo contato.";
      formContato.reset();
    });

    // Libras
    const btnLibras = document.getElementById("btn-libras");
    const modalLibras = document.getElementById("modal-libras");
    const btnFecharLibras = document.getElementById("btn-fechar-libras");

    btnLibras.addEventListener("click", () => {
      modalLibras.style.display = "block";
      modalLibras.setAttribute("aria-hidden", "false");
      btnFecharLibras.focus();
    });

    btnFecharLibras.addEventListener("click", () => {
      modalLibras.style.display = "none";
      modalLibras.setAttribute("aria-hidden", "true");
      btnLibras.focus();
    });

    // Fechar modal Libras com ESC
    document.addEventListener("keydown", (e) => {
      if(e.key === "Escape" && modalLibras.style.display === "block") {
        modalLibras.style.display = "none";
        modalLibras.setAttribute("aria-hidden", "true");
        btnLibras.focus();
      }
    });
  </script>
</body>
</html>
