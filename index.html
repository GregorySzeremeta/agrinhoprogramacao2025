<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Estação da Terra</title>

  <!-- Model viewer para 3D -->
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>

  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>Estação da Terra</h1>
    <!-- Botão carrinho com imagem PNG -->
    <button id="btn-carrinho" aria-label="Abrir carrinho de compras">
      <img src="images/carrinho.png" alt="Ícone carrinho de compras" />
      <span id="contador-carrinho" aria-live="polite" aria-atomic="true" class="contador-carrinho">0</span>
    </button>
  </header>

  <main>
    <section id="produtos">
      <h2>Produtos</h2>
      <div class="grid-produtos">
        <!-- Produtos exemplo -->
        <div class="produto-card">
          <img src="images/banana.jpg" alt="Banana" />
          <h3>Banana</h3>
          <p>R$ 3,50</p>
          <button class="btn-add" aria-label="Adicionar Banana ao carrinho">Adicionar</button>
        </div>
        <div class="produto-card">
          <img src="images/mel.jpg" alt="Mel" />
          <h3>Mel</h3>
          <p>R$ 15,00</p>
          <button class="btn-add" aria-label="Adicionar Mel ao carrinho">Adicionar</button>
        </div>
        <!-- Adicione seus produtos aqui -->
      </div>
    </section>
  </main>

  <!-- Modal do carrinho -->
  <div id="modal-carrinho" class="modal" aria-hidden="true" role="dialog" aria-labelledby="titulo-carrinho">
    <div class="modal-conteudo">
      <h2 id="titulo-carrinho">Carrinho de Compras</h2>
      <ul id="lista-carrinho"></ul>
      <button id="btn-esvaziar-carrinho">Esvaziar Carrinho</button>
      <button id="btn-finalizar-compra">Finalizar Compra</button>
      <button id="btn-fechar-carrinho" aria-label="Fechar carrinho">Fechar</button>
    </div>
  </div>

  <!-- Botão acessibilidade fixo canto inferior esquerdo -->
  <button id="btn-acessibilidade" aria-haspopup="true" aria-expanded="false" aria-controls="menu-acessibilidade" aria-label="Abrir opções de acessibilidade" title="Acessibilidade">⚙️</button>

  <!-- Menu de acessibilidade -->
  <div id="menu-acessibilidade" class="menu-acessibilidade" aria-hidden="true" role="region" aria-label="Opções de acessibilidade">
    <button id="btn-modo-escuro" aria-pressed="false">Modo Escuro</button>
    <button id="btn-modo-daltonico" aria-pressed="false">Modo Daltonico</button>
    <button id="btn-aumentar-fonte">Aumentar Fonte</button>
    <button id="btn-diminuir-fonte">Diminuir Fonte</button>
    <button id="btn-libras" aria-haspopup="dialog" aria-controls="modal-libras">Abrir LIBRAS 3D</button>
  </div>

  <!-- Modal LIBRAS 3D -->
  <div id="modal-libras" class="modal-libras" aria-hidden="true" role="dialog" aria-labelledby="titulo-libras">
    <div class="modal-conteudo">
      <h2 id="titulo-libras">Intérprete LIBRAS 3D</h2>
      <model-viewer 
        src="https://modelviewer.dev/shared-assets/models/Astronaut.glb" 
        alt="Modelo 3D intérprete LIBRAS" 
        camera-controls auto-rotate 
        style="width: 100%; max-width: 400px; height: 400px;">
      </model-viewer>
      <button id="btn-fechar-libras">Fechar</button>
    </div>
  </div>

  <script>
    // Acessibilidade - abrir/fechar menu
    const btnAcessibilidade = document.getElementById('btn-acessibilidade');
    const menuAcessibilidade = document.getElementById('menu-acessibilidade');

    btnAcessibilidade.addEventListener('click', () => {
      const expanded = btnAcessibilidade.getAttribute('aria-expanded') === 'true';
      btnAcessibilidade.setAttribute('aria-expanded', !expanded);
      menuAcessibilidade.style.display = expanded ? 'none' : 'flex';
      menuAcessibilidade.setAttribute('aria-hidden', expanded);
    });

    // Modo escuro
    const btnModoEscuro = document.getElementById('btn-modo-escuro');
    btnModoEscuro.addEventListener('click', () => {
      const ativo = btnModoEscuro.getAttribute('aria-pressed') === 'true';
      btnModoEscuro.setAttribute('aria-pressed', !ativo);
      document.body.classList.toggle('modo-escuro');
    });

    // Modo daltônico (filtro invertido como exemplo)
    const btnModoDaltonico = document.getElementById('btn-modo-daltonico');
    btnModoDaltonico.addEventListener('click', () => {
      const ativo = btnModoDaltonico.getAttribute('aria-pressed') === 'true';
      btnModoDaltonico.setAttribute('aria-pressed', !ativo);
      document.body.classList.toggle('modo-daltonico');
    });

    // Aumentar/diminuir fonte
    const btnAumentarFonte = document.getElementById('btn-aumentar-fonte');
    const btnDiminuirFonte = document.getElementById('btn-diminuir-fonte');

    btnAumentarFonte.addEventListener('click', () => {
      let fontSize = parseFloat(getComputedStyle(document.body).fontSize);
      if (fontSize < 24) {
        document.body.style.fontSize = (fontSize + 2) + 'px';
      }
    });
    btnDiminuirFonte.addEventListener('click', () => {
      let fontSize = parseFloat(getComputedStyle(document.body).fontSize);
      if (fontSize > 12) {
        document.body.style.fontSize = (fontSize - 2) + 'px';
      }
    });

    // Abrir e fechar modal LIBRAS
    const btnAbrirLibras = document.getElementById('btn-libras');
    const modalLibras = document.getElementById('modal-libras');
    const btnFecharLibras = document.getElementById('btn-fechar-libras');

    btnAbrirLibras.addEventListener('click', () => {
      modalLibras.style.display = 'flex';
      modalLibras.setAttribute('aria-hidden', 'false');
    });
    btnFecharLibras.addEventListener('click', () => {
      modalLibras.style.display = 'none';
      modalLibras.setAttribute('aria-hidden', 'true');
    });

    // Modal carrinho
    const btnCarrinho = document.getElementById('btn-carrinho');
    const modalCarrinho = document.getElementById('modal-carrinho');
    const btnFecharCarrinho = document.getElementById('btn-fechar-carrinho');
    const btnEsvaziarCarrinho = document.getElementById('btn-esvaziar-carrinho');
    const btnFinalizarCompra = document.getElementById('btn-finalizar-compra');
    const listaCarrinho = document.getElementById('lista-carrinho');
    const contadorCarrinho = document.getElementById('contador-carrinho');
    const botoesAdd = document.querySelectorAll('.btn-add');

    let carrinho = [];

    // Atualiza contador do carrinho
    function atualizarContador() {
      contadorCarrinho.textContent = carrinho.length;
      contadorCarrinho.style.display = carrinho.length > 0 ? 'inline-block' : 'none';
    }
    atualizarContador();

    // Renderiza itens no modal do carrinho
    function renderizarCarrinho() {
      listaCarrinho.innerHTML = '';
      if (carrinho.length === 0) {
        listaCarrinho.innerHTML = '<li>Carrinho vazio</li>';
      } else {
        carrinho.forEach((item, i) => {
          const li = document.createElement('li');
          li.textContent = `${item.nome} - R$ ${item.preco.toFixed(2)}`;
          listaCarrinho.appendChild(li);
        });
      }
    }

    // Abrir modal carrinho
    btnCarrinho.addEventListener('click', () => {
      modalCarrinho.style.display = 'flex';
      modalCarrinho.setAttribute('aria-hidden', 'false');
      renderizarCarrinho();
    });
    // Fechar modal carrinho
    btnFecharCarrinho.addEventListener('click', () => {
      modalCarrinho.style.display = 'none';
      modalCarrinho.setAttribute('aria-hidden', 'true');
    });
    // Esvaziar carrinho
    btnEsvaziarCarrinho.addEventListener('click', () => {
      carrinho = [];
      atualizarContador();
      renderizarCarrinho();
    });
    // Finalizar compra (apenas alerta)
    btnFinalizarCompra.addEventListener('click', () => {
      alert('Compra finalizada! Obrigado!');
      carrinho = [];
      atualizarContador();
      renderizarCarrinho();
      modalCarrinho.style.display = 'none';
      modalCarrinho.setAttribute('aria-hidden', 'true');
    });

    // Adicionar produtos ao carrinho
    botoesAdd.forEach((btn, idx) => {
      btn.addEventListener('click', () => {
        const produtoCard = btn.parentElement;
        const nome = produtoCard.querySelector('h3').textContent;
        const precoTexto = produtoCard.querySelector('p').textContent.replace('R$ ', '').replace(',', '.');
        const preco = parseFloat(precoTexto);
        carrinho.push({ nome, preco });
        atualizarContador();
      });
    });
  </script>
</body>
</html>
