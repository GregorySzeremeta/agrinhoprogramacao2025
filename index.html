<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Esta√ß√£o da Terra</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>Esta√ß√£o da Terra</h1>
    <nav>
      <button id="btn-loja" aria-label="Ir para a loja" class="nav-btn active">Loja</button>
      <button id="btn-contato" aria-label="Ir para contato" class="nav-btn">Contato</button>
      <ul class="menu-list">
        <li><a href="quiz.html" class="menu-link">Quiz</a></li>
        <li><a href="sobre.html" class="menu-link">Sobre</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <!-- Loja -->
    <section id="produtos" tabindex="0" aria-label="Produtos √† venda">
      <h2>Produtos √† Venda</h2>
      <div class="barracas">
        <!-- Exemplo de produto -->
        <div class="produto-card">
          <img src="img/ma√ß√£.jpg" alt="Ma√ß√£ Org√¢nica" />
          <h3>Ma√ß√£ Org√¢nica</h3>
          <p>R$ 3,00/kg</p>
          <button class="btn-adicionar" data-nome="Ma√ß√£ Org√¢nica" data-preco="3">Adicionar</button>
        </div>
        <div class="produto-card">
          <img src="img/mel.jpg" alt="Mel Puro" />
          <h3>Mel Puro</h3>
          <p>R$ 15,00</p>
          <button class="btn-adicionar" data-nome="Mel Puro" data-preco="15">Adicionar</button>
        </div>
        <!-- Adicione outros produtos conforme seu c√≥digo original -->
        <!-- ... -->
      </div>
    </section>

    <!-- Carrinho -->
    <section id="carrinho" tabindex="0" aria-label="Carrinho de compras">
      <h2>üõí Carrinho de Compras</h2>
      <ul id="lista-carrinho"></ul>
      <p id="total">Total: R$ 0,00</p>
      <button id="btn-esvaziar" class="btn-secondary">üóëÔ∏è Esvaziar Carrinho</button>
      <button id="btn-finalizar" class="btn-primary">Finalizar Compra</button>
    </section>

    <!-- Finalizar Compra -->
    <section id="finalizar-compra" tabindex="0" aria-label="Finalizar compra" hidden>
      <h2>Finalizar Compra</h2>
      <form id="form-finalizar" onsubmit="return finalizarCompra(event)">
        <fieldset>
          <legend>Informa√ß√µes do Comprador</legend>
          <label for="nome-comprador">Nome Completo:</label><br />
          <input type="text" id="nome-comprador" name="nome-comprador" required /><br />

          <label for="email-comprador">Email:</label><br />
          <input type="email" id="email-comprador" name="email-comprador" required /><br />

          <label for="telefone-comprador">Telefone:</label><br />
          <input type="tel" id="telefone-comprador" name="telefone-comprador" /><br />
        </fieldset>

        <fieldset>
          <legend>Endere√ßo de Entrega</legend>
          <label for="endereco">Endere√ßo:</label><br />
          <textarea id="endereco" name="endereco" rows="3" required></textarea><br />

          <label for="cep">CEP:</label><br />
          <input type="text" id="cep" name="cep" required pattern="\d{5}-?\d{3}" placeholder="12345-678" /><br />
        </fieldset>

        <fieldset>
          <legend>Forma de Pagamento</legend>
          <label>
            <input type="radio" name="pagamento" value="boleto" required /> Boleto
          </label><br />
          <label>
            <input type="radio" name="pagamento" value="cartao" /> Cart√£o de Cr√©dito
          </label><br />
          <label>
            <input type="radio" name="pagamento" value="pix" /> Pix
          </label>
        </fieldset>

        <div class="botoes-finalizar">
          <button type="submit" class="btn-primary">Confirmar Compra</button>
          <button type="button" id="btn-cancelar" class="btn-secondary">Cancelar</button>
        </div>
      </form>
    </section>

    <!-- Contato -->
    <section id="contato" tabindex="0" aria-label="Se√ß√£o de contato" hidden>
      <h2>Contato</h2>
      <form id="form-contato" onsubmit="return enviarFormulario(event)">
        <label for="nome">Nome:</label><br />
        <input type="text" id="nome" name="nome" required /><br />

        <label for="email">Email:</label><br />
        <input type="email" id="email" name="email" required /><br />

        <label for="mensagem">Mensagem:</label><br />
        <textarea id="mensagem" name="mensagem" rows="4" required></textarea><br />

        <button type="submit" class="btn-primary">Enviar</button>
      </form>
    </section>
  </main>

  <script>
    // Navega√ß√£o entre se√ß√µes
    const btnLoja = document.getElementById('btn-loja');
    const btnContato = document.getElementById('btn-contato');
    const secProdutos = document.getElementById('produtos');
    const secCarrinho = document.getElementById('carrinho');
    const secContato = document.getElementById('contato');
    const secFinalizar = document.getElementById('finalizar-compra');

    function mostrarSecao(secao) {
      // Esconder todas
      [secProdutos, secCarrinho, secContato, secFinalizar].forEach(s => s.hidden = true);
      // Mostrar a escolhida
      secao.hidden = false;

      // Atualizar bot√µes do menu
      if (secao === secProdutos || secao === secCarrinho) {
        btnLoja.classList.add('active');
        btnContato.classList.remove('active');
      } else if (secao === secContato) {
        btnLoja.classList.remove('active');
        btnContato.classList.add('active');
      } else {
        btnLoja.classList.remove('active');
        btnContato.classList.remove('active');
      }
    }

    btnLoja.addEventListener('click', () => mostrarSecao(secProdutos));
    btnContato.addEventListener('click', () => mostrarSecao(secContato));

    // Inicial
    mostrarSecao(secProdutos);

    // Carrinho
    const listaCarrinho = document.getElementById('lista-carrinho');
    const totalDisplay = document.getElementById('total');
    const btnEsvaziar = document.getElementById('btn-esvaziar');
    const btnFinalizar = document.getElementById('btn-finalizar');
    const btnCancelarFinalizar = document.getElementById('btn-cancelar');

    let carrinho = [];

    // Adicionar produtos aos bot√µes
    document.querySelectorAll('.btn-adicionar').forEach(btn => {
      btn.addEventListener('click', () => {
        const nome = btn.dataset.nome;
        const preco = parseFloat(btn.dataset.preco);
        adicionarAoCarrinho(nome, preco);
      });
    });

    function adicionarAoCarrinho(nome, preco) {
      const itemExistente = carrinho.find(item => item.nome === nome);
      if (itemExistente) {
        itemExistente.quantidade++;
      } else {
        carrinho.push({ nome, preco, quantidade: 1 });
      }
      atualizarCarrinho();
    }

    function atualizarCarrinho() {
      listaCarrinho.innerHTML = '';
      let total = 0;
      carrinho.forEach((item, index) => {
        total += item.preco * item.quantidade;
        const li = document.createElement('li');
        li.className = "item-carrinho";
        li.innerHTML = `
          <span>${item.nome} - R$ ${item.preco.toFixed(2)} x ${item.quantidade}</span>
          <button aria-label="Remover ${item.nome} do carrinho" data-index="${index}" class="btn-remover">Remover</button>
        `;
        listaCarrinho.appendChild(li);
      });
      totalDisplay.textContent = `Total: R$ ${total.toFixed(2)}`;
      btnFinalizar.disabled = carrinho.length === 0;
      btnEsvaziar.disabled = carrinho.length === 0;

      // Adicionar evento para remover
      document.querySelectorAll('.btn-remover').forEach(btn => {
        btn.addEventListener('click', () => {
          const idx = parseInt(btn.dataset.index);
          removerDoCarrinho(idx);
        });
      });
    }

    function removerDoCarrinho(index) {
      carrinho.splice(index, 1);
      atualizarCarrinho();
    }

    btnEsvaziar.addEventListener('click', () => {
      carrinho = [];
      atualizarCarrinho();
    });

    btnFinalizar.addEventListener('click', () => {
      mostrarSecao(secFinalizar);
    });

    btnCancelarFinalizar.addEventListener('click', () => {
      mostrarSecao(secProdutos);
    });

    // Finalizar compra
    const formFinalizar = document.getElementById('form-finalizar');
    formFinalizar.addEventListener('submit', finalizarCompra);

    function finalizarCompra(event) {
      event.preventDefault();
      if (carrinho.length === 0) {
        alert('Seu carrinho est√° vazio!');
        mostrarSecao(secProdutos);
        return;
      }
      alert('Compra finalizada com sucesso!\nObrigado por comprar na Esta√ß√£o da Terra.');
      // Limpar carrinho e formul√°rio
      carrinho = [];
      atualizarCarrinho();
      formFinalizar.reset();
      mostrarSecao(secProdutos);
    }

    // Formul√°rio contato
    function enviarFormulario(event) {
      event.preventDefault();
      alert('Mensagem enviada! Obrigado pelo contato.');
      document.getElementById('form-contato').reset();
    }
  </script>
</body>
</html>
