<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Esta√ß√£o da Terra</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/@meedan/react-transcript-plugin/dist/react-transcript-plugin.min.js"></script>
</head>
<body>
  <header>
    <h1>Esta√ß√£o da Terra</h1>
    <p class="slogan">Do campo √† cidade, colhendo oportunidades</p>
    <nav>
      <button onclick="mostrarPagina('produtos')">Loja</button>
      <button onclick="mostrarPagina('quiz')">Quiz</button>
      <button onclick="mostrarPagina('contato')">Contato</button>
      <button onclick="toggleSomAmbiente()">Som do Campo</button>
      <div id="cart-icon" onclick="mostrarCarrinho()">
        üõí<span id="cart-count">0</span>
      </div>
    </nav>
  </header>

  <main>
    <section id="produtos" class="pagina">
      <div class="grid-produtos" id="lista-produtos"></div>
    </section>

    <section id="quiz" class="pagina" style="display:none">
      <h2>Quiz: Produ√ß√£o do Campo</h2>
      <form id="quiz-form"></form>
      <div id="resultado"></div>
    </section>

    <section id="contato" class="pagina" style="display:none">
      <h2>Entre em Contato</h2>
      <form>
        <label for="nome">Nome:</label>
        <input type="text" id="nome">
        <label for="email">Email:</label>
        <input type="email" id="email">
        <label for="mensagem">Mensagem:</label>
        <textarea id="mensagem"></textarea>
        <button type="submit">Enviar</button>
      </form>
    </section>

    <section id="carrinho" class="pagina" style="display:none">
      <h2>Carrinho de Compras</h2>
      <ul id="carrinho-lista"></ul>
      <p class="total" id="total">Total: R$ 0,00</p>
      <div>
        <button onclick="finalizarCompra('pix')">Pagar com PIX</button>
        <button onclick="finalizarCompra('credito')">Cart√£o de Cr√©dito</button>
        <button onclick="finalizarCompra('debito')">Cart√£o de D√©bito</button>
      </div>
    </section>

    <div id="confete-container"></div>
  </main>

  <!-- LIBRAS -->
  <div vw class="enabled">
    <div vw-access-button class="active"></div>
    <div vw-plugin-wrapper>
      <div class="vw-plugin-top-wrapper"></div>
    </div>
  </div>
  <script src="https://vlibras.gov.br/app/vlibras-plugin.js"></script>
  <script>
    new window.VLibras.Widget('https://vlibras.gov.br/app');
  </script>

  <audio id="som-ambiente" loop>
    <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
  </audio>

  <script>
    const produtos = [
      { nome: "Mel Org√¢nico", preco: 25, imagem: "https://via.placeholder.com/200?text=Mel" },
      { nome: "Queijo Artesanal", preco: 40, imagem: "https://via.placeholder.com/200?text=Queijo" },
      { nome: "Leite Integral", preco: 6, imagem: "https://via.placeholder.com/200?text=Leite" },
      { nome: "Alface Hidrop√¥nica", preco: 4, imagem: "https://via.placeholder.com/200?text=Alface" },
      { nome: "Tomate Org√¢nico", preco: 8, imagem: "https://via.placeholder.com/200?text=Tomate" }
    ];

    const perguntasQuiz = [
      { pergunta: "Qual √© o melhor hor√°rio para colher alface?", opcoes: ["Manh√£", "Tarde", "Meia-noite"], correta: 0 },
      { pergunta: "Qual √© o tempo m√©dio de produ√ß√£o de mel?", opcoes: ["2 dias", "1 m√™s", "6 meses"], correta: 2 }
    ];

    const carrinho = [];

    function atualizarProdutos() {
      const lista = document.getElementById('lista-produtos');
      lista.innerHTML = '';
      produtos.forEach((produto, index) => {
        const div = document.createElement('div');
        div.className = 'produto';
        div.innerHTML = `
          <img src="${produto.imagem}" alt="${produto.nome}">
          <h3>${produto.nome}</h3>
          <p>R$ ${produto.preco.toFixed(2)}</p>
          <button onclick="adicionarAoCarrinho(${index})">Adicionar ao carrinho</button>
        `;
        lista.appendChild(div);
      });
    }

    function adicionarAoCarrinho(index) {
      carrinho.push(produtos[index]);
      document.getElementById('cart-count').innerText = carrinho.length;
    }

    function mostrarCarrinho() {
      mostrarPagina('carrinho');
      const lista = document.getElementById('carrinho-lista');
      lista.innerHTML = '';
      let total = 0;
      carrinho.forEach(prod => {
        const li = document.createElement('li');
        li.innerText = `${prod.nome} - R$ ${prod.preco.toFixed(2)}`;
        lista.appendChild(li);
        total += prod.preco;
      });
      document.getElementById('total').innerText = `Total: R$ ${total.toFixed(2)}`;
    }

    function finalizarCompra(metodo) {
      alert(`Compra finalizada com ${metodo.toUpperCase()}`);
    }

    function mostrarPagina(id) {
      document.querySelectorAll('.pagina').forEach(sec => sec.style.display = 'none');
      document.getElementById(id).style.display = 'block';
    }

    function montarQuiz() {
      const quizForm = document.getElementById('quiz-form');
      quizForm.innerHTML = '';
      perguntasQuiz.forEach((q, i) => {
        const div = document.createElement('fieldset');
        div.className = 'quiz-pergunta';
        div.innerHTML = `<legend>${q.pergunta}</legend>` +
          q.opcoes.map((op, j) => `
            <label><input type="radio" name="q${i}" value="${j}"> ${op}</label>
          `).join('');
        quizForm.appendChild(div);
      });
      quizForm.addEventListener('submit', function (e) {
        e.preventDefault();
        let acertos = 0;
        perguntasQuiz.forEach((q, i) => {
          const marcada = document.querySelector(`input[name='q${i}']:checked`);
          if (marcada && Number(marcada.value) === q.correta) acertos++;
        });
        const percentual = Math.round((acertos / perguntasQuiz.length) * 100);
        document.getElementById('resultado').innerText = `Voc√™ acertou ${acertos}/${perguntasQuiz.length} perguntas (${percentual}%)!`;
        if (acertos > 0) soltarConfetes();
      });
    }

    function soltarConfetes() {
      const container = document.getElementById('confete-container');
      for (let i = 0; i < 100; i++) {
        const confete = document.createElement('div');
        confete.className = 'confete';
        confete.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 70%)`;
        confete.style.left = `${Math.random() * 100}%`;
        container.appendChild(confete);
        setTimeout(() => confete.remove(), 3000);
      }
    }

    function toggleSomAmbiente() {
      const audio = document.getElementById('som-ambiente');
      if (audio.paused) audio.play(); else audio.pause();
    }

    atualizarProdutos();
    montarQuiz();
  </script>
</body>
</html>