<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Produtos do Interior - Estação Rural</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>Produtos do Interior - Estação Rural</h1>
    <nav>
      <button onclick="location.href='index.html'">Loja</button>
      <button onclick="location.href='quiz.html'">Quiz Sustentabilidade</button>
      <button onclick="location.href='about.html'">Sobre</button>
      <button onclick="location.href='contact.html'">Contato</button>
    </nav>
  </header>

  <main>
    <section id="products">
      <h2>Produtos</h2>
      <div class="product-list">
        <!-- Produtos carregados via JS -->
      </div>
    </section>

    <section id="cart">
      <h2>Carrinho de Compras</h2>
      <div id="cart-items">Carrinho vazio</div>
      <div id="cart-total">Total: R$ 0,00</div>
      <button id="clear-cart-btn">Esvaziar Carrinho</button>
    </section>
  </main>

  <script>
    // Lista de produtos (pode expandir)
    const products = [
      { id: 1, name: "Mel Puro", price: 25.00, description: "Mel natural do campo", img: "https://i.imgur.com/hF7XYGh.jpg" },
      { id: 2, name: "Queijo Artesanal", price: 40.00, description: "Queijo fresco produzido localmente", img: "https://i.imgur.com/fb2WJJb.jpg" },
      { id: 3, name: "Frutas Orgânicas", price: 15.00, description: "Mix de frutas colhidas no campo", img: "https://i.imgur.com/zTvwdZV.jpg" },
      { id: 4, name: "Verduras Frescas", price: 10.00, description: "Verduras direto da horta", img: "https://i.imgur.com/4rAvQVP.jpg" },
      { id: 5, name: "Leite de Fazenda", price: 8.00, description: "Leite fresco e natural", img: "https://i.imgur.com/UJzQbFN.jpg" }
    ];

    const productList = document.querySelector(".product-list");
    const cartItems = document.getElementById("cart-items");
    const cartTotal = document.getElementById("cart-total");
    const clearCartBtn = document.getElementById("clear-cart-btn");

    let cart = JSON.parse(localStorage.getItem("cart")) || [];

    // Função para formatar preço em reais
    function formatPrice(price) {
      return price.toLocaleString("pt-BR", { style: "currency", currency: "BRL" });
    }

    // Mostrar produtos na tela
    function showProducts() {
      productList.innerHTML = "";
      products.forEach(prod => {
        const productDiv = document.createElement("div");
        productDiv.className = "product";

        productDiv.innerHTML = `
          <img src="${prod.img}" alt="${prod.name}" />
          <h3>${prod.name}</h3>
          <p>${prod.description}</p>
          <p><strong>${formatPrice(prod.price)}</strong></p>
          <button data-id="${prod.id}">Adicionar ao Carrinho</button>
        `;

        productList.appendChild(productDiv);
      });
    }

    // Atualiza o carrinho na tela
    function updateCart() {
      if (cart.length === 0) {
        cartItems.textContent = "Carrinho vazio";
        cartTotal.textContent = "Total: R$ 0,00";
        return;
      }

      cartItems.innerHTML = "";
      let total = 0;

      cart.forEach(item => {
        const prod = products.find(p => p.id === item.id);
        total += prod.price * item.quantity;

        const itemDiv = document.createElement("div");
        itemDiv.className = "cart-item";
        itemDiv.innerHTML = `
          <span>${prod.name} (x${item.quantity})</span>
          <span>${formatPrice(prod.price * item.quantity)}</span>
          <button class="remove-item" data-id="${item.id}">Remover</button>
        `;
        cartItems.appendChild(itemDiv);
      });

      cartTotal.textContent = `Total: ${formatPrice(total)}`;
    }

    // Adiciona item ao carrinho
    function addToCart(id) {
      const itemIndex = cart.findIndex(i => i.id === id);
      if (itemIndex > -1) {
        cart[itemIndex].quantity++;
      } else {
        cart.push({ id: id, quantity: 1 });
      }
      localStorage.setItem("cart", JSON.stringify(cart));
      updateCart();
    }

    // Remove item do carrinho
    function removeFromCart(id) {
      cart = cart.filter(i => i.id !== id);
      localStorage.setItem("cart", JSON.stringify(cart));
      updateCart();
    }

    // Esvaziar carrinho
    function clearCart() {
      cart = [];
      localStorage.setItem("cart", JSON.stringify(cart));
      updateCart();
    }

    // Eventos
    productList.addEventListener("click", e => {
      if (e.target.tagName === "BUTTON") {
        const id = Number(e.target.getAttribute("data-id"));
        addToCart(id);
      }
    });

    cartItems.addEventListener("click", e => {
      if (e.target.classList.contains("remove-item")) {
        const id = Number(e.target.getAttribute("data-id"));
        removeFromCart(id);
      }
    });

    clearCartBtn.addEventListener("click", clearCart);

    // Inicializar
    showProducts();
    updateCart();
  </script>
</body>
</html>
