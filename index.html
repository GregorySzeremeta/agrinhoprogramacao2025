<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>EstaÃ§Ã£o da Terra</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://vlibras.gov.br/app/vlibras-plugin.js" defer></script>
</head>
<body>

  <!-- AnimaÃ§Ã£o de boas-vindas -->
  <div id="animacao-boas-vindas">
    <h1 class="animacao-texto">ðŸŒ± EstaÃ§Ã£o da Terra ðŸŒ¾</h1>
    <p class="animacao-subtexto">Do campo Ã  cidade, colhendo oportunidades</p>
  </div>

  <!-- BotÃµes de acessibilidade -->
  <div id="acessibilidade">
    <button onclick="aumentarFonte()">A+</button>
    <button onclick="alternarContraste()">Alto Contraste</button>
    <button onclick="tocarSomAmbiente()">ðŸŽµ</button>
  </div>
  <audio id="somAmbiente" loop>
    <source src="sons/campo.mp3" type="audio/mpeg">
  </audio>

  <!-- VLibras -->
  <div vw class="enabled">
    <div vw-access-button class="active"></div>
    <div vw-plugin-wrapper>
      <div class="vw-plugin-top-wrapper"></div>
    </div>
  </div>

  <!-- CabeÃ§alho -->
  <header>
    <h1>EstaÃ§Ã£o da Terra</h1>
    <p class="slogan">Do campo Ã  cidade, colhendo oportunidades</p>
    <nav class="menu" aria-label="Menu principal">
      <ul>
        <li><button class="menu-btn" id="btn-loja" aria-controls="sec-loja" aria-expanded="true">Loja</button></li>
        <li><button class="menu-btn" id="btn-contato" aria-controls="sec-contato" aria-expanded="false">Contato</button></li>
        <li><a href="quiz.html" class="menu-link">Quiz</a></li>
        <li><a href="sobre.html" class="menu-link">Sobre</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <!-- SeÃ§Ã£o Loja -->
    <section class="produtos" id="sec-loja" tabindex="-1" aria-label="SeÃ§Ã£o da loja com produtos">
      <h2>Produtos Ã  Venda</h2>
      <div class="barracas">

        <article class="produto-card" tabindex="0">
          <img src="imagens/maca.jpg" alt="MaÃ§Ã£ OrgÃ¢nica" />
          <h3>MaÃ§Ã£ OrgÃ¢nica</h3>
          <p>R$ 3,00/kg</p>
          <button onclick="adicionarAoCarrinho('MaÃ§Ã£ OrgÃ¢nica', 3)">Adicionar</button>
        </article>

        <article class="produto-card" tabindex="0">
          <img src="imagens/mel.jpg" alt="Mel Puro" />
          <h3>Mel Puro</h3>
          <p>R$ 15,00</p>
          <button onclick="adicionarAoCarrinho('Mel Puro', 15)">Adicionar</button>
        </article>

        <article class="produto-card" tabindex="0">
          <img src="imagens/queijo.jpg" alt="Queijo Artesanal" />
          <h3>Queijo Artesanal</h3>
          <p>R$ 25,00</p>
          <button onclick="adicionarAoCarrinho('Queijo Artesanal', 25)">Adicionar</button>
        </article>

        <article class="produto-card" tabindex="0">
          <img src="imagens/azeite.jpg" alt="Azeite de Oliva" />
          <h3>Azeite de Oliva</h3>
          <p>R$ 40,00</p>
          <button onclick="adicionarAoCarrinho('Azeite de Oliva', 40)">Adicionar</button>
        </article>

        <article class="produto-card" tabindex="0">
          <img src="imagens/banana.jpg" alt="Banana OrgÃ¢nica" />
          <h3>Banana OrgÃ¢nica</h3>
          <p>R$ 2,50/kg</p>
          <button onclick="adicionarAoCarrinho('Banana OrgÃ¢nica', 2.5)">Adicionar</button>
        </article>

      </div>
    </section>

    <!-- SeÃ§Ã£o Contato -->
    <section id="sec-contato" tabindex="-1" aria-label="SeÃ§Ã£o de contato" hidden>
      <h2>Contato</h2>
      <form id="form-contato">
        <label for="nome">Nome:</label>
        <input type="text" id="nome" name="nome" required />
        <label for="email">Email:</label>
        <input type="email" id="email" name="email" required />
        <label for="mensagem">Mensagem:</label>
        <textarea id="mensagem" name="mensagem" rows="4" required></textarea>
        <button type="submit">Enviar</button>
      </form>
    </section>

    <!-- Carrinho -->
    <section class="carrinho" aria-label="Carrinho de Compras">
      <h2>Carrinho</h2>
      <ul id="lista-carrinho" aria-live="polite" aria-relevant="additions removals"></ul>
      <p id="total-carrinho">Total: R$ 0,00</p>
      <button id="btn-finalizar" onclick="mostrarAreaPagamento()" disabled>Finalizar Compra</button>
      <button id="btn-limpar" onclick="limparCarrinho()" disabled>Limpar Carrinho</button>
    </section>

    <!-- Ãrea de Pagamento -->
    <section class="pagamento" id="area-pagamento" style="display:none;">
      <h2>Pagamento</h2>
      <form id="form-pagamento" onsubmit="finalizarCompra(event)">
        <label for="nome-pagamento">Nome Completo:</label>
        <input type="text" id="nome-pagamento" name="nome-pagamento" required />
        <label for="cartao">NÃºmero do CartÃ£o:</label>
        <input type="text" id="cartao" name="cartao" pattern="\d{16}" maxlength="16" placeholder="0000 0000 0000 0000" required />
        <label for="validade">Validade:</label>
        <input type="month" id="validade" name="validade" required />
        <label for="cvv">CVV:</label>
        <input type="password" id="cvv" name="cvv" pattern="\d{3}" maxlength="3" required />
        <button type="submit">Pagar</button>
        <button type="button" onclick="voltarAoCarrinho()">Voltar ao Carrinho</button>
      </form>
    </section>
  </main>

  <!-- RODAPÃ‰ -->
  <footer style="text-align:center; padding: 20px; background:#e6ffe6;">
    <p>Siga-nos nas redes sociais:</p>
    <a href="https://instagram.com" target="_blank">Instagram</a> |
    <a href="https://facebook.com" target="_blank">Facebook</a> |
    <a href="https://tiktok.com" target="_blank">TikTok</a>
  </footer>

  <script>
    // VLibras plugin init
    window.addEventListener('load', () => {
      new window.VLibras.Widget('https://vlibras.gov.br/app');

      // Esconde animaÃ§Ã£o de boas-vindas
      setTimeout(() => {
        const animacao = document.getElementById('animacao-boas-vindas');
        if (animacao) animacao.style.display = 'none';
      }, 3000);
    });

    // Acessibilidade
    function aumentarFonte() {
      document.body.style.fontSize = 'larger';
    }
    function alternarContraste() {
      document.body.classList.toggle('contraste-alto');
    }
    function tocarSomAmbiente() {
      const audio = document.getElementById('somAmbiente');
      if (audio.paused) {
        audio.play();
      } else {
        audio.pause();
      }
    }

    // Menu de seÃ§Ãµes
    const btnLoja = document.getElementById('btn-loja');
    const btnContato = document.getElementById('btn-contato');
    const secLoja = document.getElementById('sec-loja');
    const secContato = document.getElementById('sec-contato');

    function mostrarSecao(secMostrar, secEsconder, btnAtivo, btnInativo) {
      secMostrar.hidden = false;
      secEsconder.hidden = true;
      btnAtivo.setAttribute('aria-expanded', 'true');
      btnInativo.setAttribute('aria-expanded', 'false');
      secMostrar.focus();
    }

    btnLoja.addEventListener('click', () => mostrarSecao(secLoja, secContato, btnLoja, btnContato));
    btnContato.addEventListener('click', () => mostrarSecao(secContato, secLoja, btnContato, btnLoja));

    // Carrinho
    let carrinho = [];

    function adicionarAoCarrinho(nome, preco) {
      const item = carrinho.find(item => item.nome === nome);
      if (item) item.quantidade++;
      else carrinho.push({ nome, preco, quantidade: 1 });
      atualizarCarrinho();
    }

    function atualizarCarrinho() {
      const lista = document.getElementById('lista-carrinho');
      lista.innerHTML = '';
      let total = 0;
      carrinho.forEach((item, index) => {
        total += item.preco * item.quantidade;
        const li = document.createElement('li');
        li.textContent = `${item.nome} - R$ ${item.preco.toFixed(2)} x ${item.quantidade}`;
        const btnRemover = document.createElement('button');
        btnRemover.textContent = 'Remover';
        btnRemover.setAttribute('aria-label', `Remover ${item.nome}`);
        btnRemover.onclick = () => removerDoCarrinho(index);
        li.appendChild(btnRemover);
        lista.appendChild(li);
      });
      document.getElementById('total-carrinho').textContent = `Total: R$ ${total.toFixed(2)}`;
      document.getElementById('btn-finalizar').disabled = carrinho.length === 0;
      document.getElementById('btn-limpar').disabled = carrinho.length === 0;
    }

    function removerDoCarrinho(index) {
      carrinho.splice(index, 1);
      atualizarCarrinho();
    }

    function limparCarrinho() {
      if (confirm('Deseja realmente limpar o carrinho?')) {
        carrinho = [];
        atualizarCarrinho();
      }
    }

    function mostrarAreaPagamento() {
      document.querySelector('.produtos').style.display = 'none';
      document.querySelector('.carrinho').style.display = 'none';
      document.getElementById('area-pagamento').style.display = 'block';
      window.scrollTo(0, 0);
    }

    function voltarAoCarrinho() {
      document.querySelector('.produtos').style.display = 'block';
      document.querySelector('.carrinho').style.display = 'block';
      document.getElementById('area-pagamento').style.display = 'none';
      window.scrollTo(0, 0);
    }

    function finalizarCompra(event) {
      event.preventDefault();
      const nome = document.getElementById('nome-pagamento').value.trim();
      if (carrinho.length === 0) {
        alert('Seu carrinho estÃ¡ vazio.');
        voltarAoCarrinho();
        return;
      }
      alert(`Obrigado pela compra, ${nome}!\nTotal: R$ ${carrinho.reduce((acc, item) => acc + item.preco * item.quantidade, 0).toFixed(2)}`);
      carrinho = [];
      atualizarCarrinho();
      document.getElementById('form-pagamento').reset();
      voltarAoCarrinho();
    }

    document.getElementById('form-contato').addEventListener('submit', function (e) {
      e.preventDefault();
      alert('Mensagem enviada! Obrigado pelo contato.');
      this.reset();
    });

    atualizarCarrinho();
  </script>
</body>
</html>
