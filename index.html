<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Esta√ß√£o da Terra</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>Esta√ß√£o da Terra</h1>
    <nav class="menu-navegacao" role="navigation" aria-label="Menu principal">
      <button id="btn-loja" aria-label="Ir para Loja" class="menu-btn">Loja</button>
      <button id="btn-contato" aria-label="Ir para Contato" class="menu-btn">Contato</button>
      <button id="btn-sobre" aria-label="Ir para Sobre" class="menu-btn">Sobre</button>
      <button id="btn-carrinho" aria-label="Ir para Carrinho" class="menu-btn">Carrinho</button>
      <button id="btn-quiz" aria-label="Ir para Quiz" class="menu-btn">Quiz</button>
      <button id="botao-acessibilidade" aria-label="Abrir op√ß√µes de acessibilidade" class="menu-btn">Acessibilidade</button>
    </nav>
  </header>

  <!-- Bot√£o fixo do carrinho -->
  <button id="btn-carrinho-fixo" aria-label="Abrir carrinho">
    <img src="img/carrinho.svg" alt="" aria-hidden="true" />
    <span id="contador-carrinho" aria-live="polite" class="contador-carrinho">0</span>
  </button>

  <!-- Menu acessibilidade -->
  <div id="menu-acessibilidade" class="menu-acessibilidade" aria-label="Op√ß√µes de acessibilidade" hidden>
    <button id="btn-aumentar-fonte" aria-label="Aumentar fonte">A+</button>
    <button id="btn-diminuir-fonte" aria-label="Diminuir fonte">A-</button>
    <button id="btn-modo-escuro" aria-label="Alternar modo escuro">üåô</button>
    <button id="btn-modo-daltonico" aria-label="Ativar filtro para daltonismo">üü¶</button>
    <button id="btn-libras" aria-label="Abrir v√≠deo em LIBRAS">LIBRAS</button>
    <button id="btn-fechar-acessibilidade" aria-label="Fechar op√ß√µes de acessibilidade">‚úñ</button>
  </div>

  <!-- Modal LIBRAS -->
  <div id="modal-libras" class="modal-libras" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="titulo-modal-libras">
    <div class="modal-conteudo">
      <h2 id="titulo-modal-libras">V√≠deo em LIBRAS</h2>
      <video controls width="320" height="240" tabindex="0" aria-label="V√≠deo de explica√ß√£o em LIBRAS">
        <source src="img/libras.mp4" type="video/mp4" />
        Seu navegador n√£o suporta v√≠deo.
      </video>
      <button id="btn-fechar-libras" aria-label="Fechar v√≠deo LIBRAS">Fechar</button>
    </div>
  </div>

  <!-- Se√ß√µes -->
  <section id="loja" tabindex="0" aria-label="Se√ß√£o de loja" style="display: grid;">
    <!-- Aqui ser√° o conte√∫do da loja -->
  </section>

  <section id="contato" tabindex="0" aria-label="Formul√°rio de contato" style="display:none;">
    <h2>Contato</h2>
    <form id="form-contato">
      <label for="nome">Nome:</label>
      <input type="text" id="nome" name="nome" required aria-required="true" />
      <label for="email">Email:</label>
      <input type="email" id="email" name="email" required aria-required="true" />
      <label for="mensagem">Mensagem:</label>
      <textarea id="mensagem" name="mensagem" required aria-required="true"></textarea>
      <button type="submit" aria-label="Enviar mensagem de contato">Enviar</button>
    </form>
    <div id="resposta-contato" aria-live="polite" style="margin-top: 1rem;"></div>
  </section>

  <section id="sobre" tabindex="0" aria-label="Informa√ß√µes sobre a Esta√ß√£o da Terra" style="display:none;">
    <h2>Sobre</h2>
    <p>Bem-vindo √† Esta√ß√£o da Terra, seu marketplace sustent√°vel e interativo, que conecta o campo √† cidade, colhendo oportunidades para todos.</p>
    <p>Nossa miss√£o √© promover produtos frescos, org√¢nicos e de qualidade, valorizando o produtor local e incentivando pr√°ticas sustent√°veis.</p>
    <p>Junte-se a n√≥s e fa√ßa parte desse movimento verde!</p>
  </section>

  <section id="carrinho" tabindex="0" aria-label="Carrinho de compras" style="display:none;">
    <h2>Seu Carrinho</h2>
    <ul id="lista-carrinho" aria-live="polite"></ul>
    <p id="total-carrinho">Total: R$ 0,00</p>
    <button id="btn-esvaziar-carrinho" aria-label="Esvaziar carrinho">Esvaziar Carrinho</button>
    <button id="btn-finalizar-compra" aria-label="Finalizar compra">Finalizar Compra</button>
  </section>

  <footer>
    <p>¬© 2025 Esta√ß√£o da Terra - Todos os direitos reservados</p>
  </footer>

  <script>
    // Navega√ß√£o das se√ß√µes
    const btnLoja = document.getElementById('btn-loja');
    const btnContato = document.getElementById('btn-contato');
    const btnSobre = document.getElementById('btn-sobre');
    const btnCarrinho = document.getElementById('btn-carrinho');
    const btnQuiz = document.getElementById('btn-quiz');
    const btnCarrinhoFixo = document.getElementById('btn-carrinho-fixo');

    const loja = document.getElementById('loja');
    const contato = document.getElementById('contato');
    const sobre = document.getElementById('sobre');
    const carrinho = document.getElementById('carrinho');

    function esconderTodasSe√ß√µes() {
      loja.style.display = 'none';
      contato.style.display = 'none';
      sobre.style.display = 'none';
      carrinho.style.display = 'none';
    }

    btnLoja.addEventListener('click', () => {
      esconderTodasSe√ß√µes();
      loja.style.display = 'grid';
      loja.focus();
    });

    btnContato.addEventListener('click', () => {
      esconderTodasSe√ß√µes();
      contato.style.display = 'block';
      contato.focus();
    });

    btnSobre.addEventListener('click', () => {
      esconderTodasSe√ß√µes();
      sobre.style.display = 'block';
      sobre.focus();
    });

    btnCarrinho.addEventListener('click', () => {
      esconderTodasSe√ß√µes();
      carrinho.style.display = 'block';
      carrinho.focus();
      atualizarCarrinho();
    });

    btnCarrinhoFixo.addEventListener('click', () => {
      esconderTodasSe√ß√µes();
      carrinho.style.display = 'block';
      carrinho.focus();
      atualizarCarrinho();
    });

    btnQuiz.addEventListener('click', () => {
      window.location.href = 'quiz.html';
    });

    // Inicializa com loja vis√≠vel
    esconderTodasSe√ß√µes();
    loja.style.display = 'grid';

    // Produtos exemplo (20 produtos)
    const produtos = [
      {nome:'Ma√ß√£', preco:3.50, img:'img/maca.png'},
      {nome:'Banana', preco:2.20, img:'img/banana.png'},
      {nome:'Laranja', preco:3.00, img:'img/laranja.png'},
      {nome:'Mel', preco:15.00, img:'img/mel.png'},
      {nome:'Leite', preco:5.00, img:'img/leite.png'},
      {nome:'Queijo', preco:12.00, img:'img/queijo.png'},
      {nome:'Alface', preco:4.50, img:'img/alface.png'},
      {nome:'Tomate', preco:4.00, img:'img/tomate.png'},
      {nome:'Cenoura', preco:3.80, img:'img/cenoura.png'},
      {nome:'Feij√£o', preco:8.50, img:'img/feijao.png'},
      {nome:'Arroz', preco:7.00, img:'img/arroz.png'},
      {nome:'Caf√©', preco:10.00, img:'img/cafe.png'},
      {nome:'Farinha', preco:6.00, img:'img/farinha.png'},
      {nome:'Abacaxi', preco:4.50, img:'img/abacaxi.png'},
      {nome:'Pera', preco:4.00, img:'img/pera.png'},
      {nome:'Melancia', preco:7.00, img:'img/melancia.png'},
      {nome:'Ch√°', preco:5.50, img:'img/cha.png'},
      {nome:'Azeite', preco:18.00, img:'img/azeite.png'},
      {nome:'Ervas', preco:9.00, img:'img/ervas.png'},
      {nome:'Semente', preco:11.00, img:'img/semente.png'}
    ];

    // Mostrar produtos na loja
    function mostrarProdutos(){
      loja.innerHTML = '';
      produtos.forEach((produto, i) => {
        const card = document.createElement('article');
        card.className = 'produto-card';
        card.innerHTML = `
          <img src="${produto.img}" alt="${produto.nome}" />
          <h3>${produto.nome}</h3>
          <p>R$ ${produto.preco.toFixed(2)}</p>
          <button class="btn-add" data-nome="${produto.nome}" data-preco="${produto.preco}">Adicionar ao carrinho</button>
        `;
        loja.appendChild(card);
      });
      adicionarEventosBotoes();
    }

    mostrarProdutos();

    // Carrinho
    let carrinhoItens = [];

    const listaCarrinho = document.getElementById('lista-carrinho');
    const totalCarrinho = document.getElementById('total-carrinho');
    const btnEsvaziarCarrinho = document.getElementById('btn-esvaziar-carrinho');
    const btnFinalizarCompra = document.getElementById('btn-finalizar-compra');
    const contadorCarrinho = document.getElementById('contador-carrinho');

    function adicionarEventosBotoes(){
      const botoesAdd = document.querySelectorAll('.btn-add');
      botoesAdd.forEach(botao => {
        botao.addEventListener('click', () => {
          const nome = botao.getAttribute('data-nome');
          const preco = parseFloat(botao.getAttribute('data-preco'));
          const itemExistente = carrinhoItens.find(item => item.nome === nome);
          if(itemExistente){
            itemExistente.quantidade++;
          } else {
            carrinhoItens.push({nome, preco, quantidade: 1});
          }
          alert(nome + ' adicionado ao carrinho!');
          atualizarCarrinho();
        });
      });
    }

    function atualizarCarrinho(){
      listaCarrinho.innerHTML = '';
      let total = 0;
      let quantidadeTotal = 0;
      carrinhoItens.forEach((item, index) => {
        total += item.preco * item.quantidade;
        quantidadeTotal += item.quantidade;

        const li = document.createElement('li');
        li.textContent = `${item.nome} - R$ ${item.preco.toFixed(2)} x ${item.quantidade}`;
        li.tabIndex = 0;

        const btnRemover = document.createElement('button');
        btnRemover.textContent = 'Remover';
        btnRemover.setAttribute('aria-label', 'Remover um ' + item.nome + ' do carrinho');
        btnRemover.addEventListener('click', () => {
          item.quantidade--;
          if(item.quantidade === 0){
            carrinhoItens.splice(index, 1);
          }
          atualizarCarrinho();
        });

        li.appendChild(btnRemover);
        listaCarrinho.appendChild(li);
      });

      totalCarrinho.textContent = 'Total: R$ ' + total.toFixed(2);
      contadorCarrinho.textContent = quantidadeTotal;
      contadorCarrinho.style.display = quantidadeTotal > 0 ? 'inline' : 'none';
    }

    btnEsvaziarCarrinho.addEventListener('click', () => {
      carrinhoItens = [];
      atualizarCarrinho();
    });

    btnFinalizarCompra.addEventListener('click', () => {
      if(carrinhoItens.length === 0){
        alert('Seu carrinho est√° vazio!');
        return;
      }
      window.location.href = 'pagamento.html';
    });

    // Formul√°rio de contato
    const formContato = document.getElementById('form-contato');
    const respostaContato = document.getElementById('resposta-contato');

    formContato.addEventListener('submit', (e) => {
      e.preventDefault();
      respostaContato.textContent = 'Mensagem enviada com sucesso! Obrigado pelo contato.';
      formContato.reset();
    });

    // Acessibilidade
    const botaoAcessibilidade = document.getElementById('botao-acessibilidade');
    const menuAcessibilidade = document.getElementById('menu-acessibilidade');
    const btnFecharAcessibilidade = document.getElementById('btn-fechar-acessibilidade');
    const btnAumentarFonte = document.getElementById('btn-aumentar-fonte');
    const btnDiminuirFonte = document.getElementById('btn-diminuir-fonte');
    const btnModoEscuro = document.getElementById('btn-modo-escuro');
    const btnModoDaltonico = document.getElementById('btn-modo-daltonico');
    const btnLibras = document.getElementById('btn-libras');
    const modalLibras = document.getElementById('modal-libras');
    const btnFecharLibras = document.getElementById('btn-fechar-libras');

    botaoAcessibilidade.addEventListener('click', () => {
      if(menuAcessibilidade.hasAttribute('hidden')){
        menuAcessibilidade.removeAttribute('hidden');
      } else {
        menuAcessibilidade.setAttribute('hidden', '');
      }
    });

    btnFecharAcessibilidade.addEventListener('click', () => {
      menuAcessibilidade.setAttribute('hidden', '');
    });

    btnAumentarFonte.addEventListener('click', () => {
      let currentSize = window.getComputedStyle(document.body).fontSize;
      let newSize = parseFloat(currentSize) + 2;
      document.body.style.fontSize = newSize + 'px';
    });

    btnDiminuirFonte.addEventListener('click', () => {
      let currentSize = window.getComputedStyle(document.body).fontSize;
      let newSize = parseFloat(currentSize) - 2;
      if(newSize >= 12){
        document.body.style.fontSize = newSize + 'px';
      }
    });

    btnModoEscuro.addEventListener('click', () => {
      document.body.classList.toggle('modo-escuro');
    });

    btnModoDaltonico.addEventListener('click', () => {
      document.body.classList.toggle('modo-daltonico');
    });

    btnLibras.addEventListener('click', () => {
      modalLibras.setAttribute('aria-hidden', 'false');
      modalLibras.style.display = 'flex';
    });

    btnFecharLibras.addEventListener('click', () => {
      modalLibras.setAttribute('aria-hidden', 'true');
      modalLibras.style.display = 'none';
    });

  </script>
</body>
</html>
