<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <title>Esta√ß√£o da Terra - Loja</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
  <script src="https://vlibras.gov.br/app/vlibras-plugin.js"></script>
</head>
<body>
  <!-- Acessibilidade -->
  <div id="acessibilidade">
    <button onclick="toggleContraste()" aria-label="Alternar contraste">üåì</button>
    <button onclick="aumentarFonte()" aria-label="Aumentar fonte">üî†</button>
    <button onclick="diminuirFonte()" aria-label="Diminuir fonte">üî°</button>
  </div>

  <!-- VLibras -->
  <div vw class="enabled">
    <div vw-access-button class="active"></div>
    <div vw-plugin-wrapper>
      <div class="vw-plugin-top-wrapper"></div>
    </div>
  </div>

  <!-- Anima√ß√£o de boas-vindas -->
  <div id="welcome-overlay">
    <div class="welcome-content">
      <h1>Bem-vindo √† Esta√ß√£o da Terra!</h1>
      <p>Do campo √† cidade, colhendo oportunidades.</p>
      <button id="btn-enter">Entrar</button>
    </div>
  </div>

  <!-- Cabe√ßalho -->
  <header>
    <h1>Esta√ß√£o da Terra</h1>
    <p class="slogan">Do campo √† cidade, colhendo oportunidades</p>
    <nav class="menu">
      <ul>
        <li><a href="quiz.html">Quiz</a></li>
        <li><a href="sobre.html">Sobre</a></li>
      </ul>
    </nav>
  </header>

  <!-- Loja -->
  <main>
    <section id="produtos">
      <h2>Produtos √† Venda</h2>
      <div class="barracas">

        <!-- Produtos originais mantidos, s√≥ um novo adicionado -->
        <div class="produto-card">
          <img src="img/ma√ß√£.jpg" alt="Ma√ß√£ Org√¢nica" />
          <h3>Ma√ß√£ Org√¢nica</h3>
          <p>R$ 3,00/kg</p>
          <button onclick="adicionarAoCarrinho('Ma√ß√£ Org√¢nica', 3)">Adicionar</button>
        </div>
        <div class="produto-card">
          <img src="img/mel.jpg" alt="Mel Puro" />
          <h3>Mel Puro</h3>
          <p>R$ 15,00</p>
          <button onclick="adicionarAoCarrinho('Mel Puro', 15)">Adicionar</button>
        </div>
        <div class="produto-card">
          <img src="img/queijo.jpg" alt="Queijo Artesanal" />
          <h3>Queijo Artesanal</h3>
          <p>R$ 25,00</p>
          <button onclick="adicionarAoCarrinho('Queijo Artesanal', 25)">Adicionar</button>
        </div>

        <!-- Produtos novos e antigos mantidos -->
        <!-- ... (todos os seus produtos existentes aqui) ... -->

        <!-- Produto novo adicionado -->
        <div class="produto-card">
          <img src="img/morango.jpg" alt="Morango Fresco" />
          <h3>Morango Fresco</h3>
          <p>R$ 7,50/caixa</p>
          <button onclick="adicionarAoCarrinho('Morango Fresco', 7.5)">Adicionar</button>
        </div>
      </div>
    </section>

    <!-- Carrinho -->
    <section id="carrinho">
      <h2>üõí Carrinho de Compras</h2>
      <ul id="lista-carrinho"></ul>
      <div class="carrinho-total"></div>
      <div class="botoes-carrinho">
        <button onclick="esvaziarCarrinho()" class="btn-red">üóëÔ∏è Esvaziar Carrinho</button>
        <button onclick="finalizarCompra()" class="btn-green" id="btn-finalizar">Finalizar Compra</button>
      </div>
    </section>

    <!-- √Årea de pagamento (inicialmente escondida) -->
    <section id="area-pagamento" class="hidden">
      <h2>Pagamento</h2>
      <form id="form-pagamento">
        <label for="nome">Nome Completo:</label>
        <input type="text" id="nome" name="nome" required />

        <label for="endereco">Endere√ßo de Entrega:</label>
        <textarea id="endereco" name="endereco" rows="3" required></textarea>

        <label for="pagamento">Forma de Pagamento:</label>
        <select id="pagamento" name="pagamento" required>
          <option value="" disabled selected>Selecione</option>
          <option value="boleto">Boleto Banc√°rio</option>
          <option value="cartao">Cart√£o de Cr√©dito</option>
          <option value="pix">PIX</option>
          <option value="dinheiro">Dinheiro na Entrega</option>
        </select>

        <button type="submit" class="btn-green">Confirmar Pagamento</button>
        <button type="button" class="btn-gray" onclick="voltarParaCarrinho()">Voltar ao Carrinho</button>
      </form>
    </section>
  </main>

  <button id="btnTopo" title="Voltar ao topo" aria-label="Voltar ao topo">‚¨ÜÔ∏è</button>

  <footer>
    <div class="redes-sociais">
      <a href="https://instagram.com/estacaodaterra" target="_blank" aria-label="Instagram"><img src="img/instagram.svg" alt="Instagram" /></a>
      <a href="https://facebook.com/estacaodaterra" target="_blank" aria-label="Facebook"><img src="img/facebook.svg" alt="Facebook" /></a>
    </div>
    <p>&copy; 2025 Esta√ß√£o da Terra. Todos os direitos reservados.</p>
  </footer>

  <!-- Som Ambiente -->
  <audio id="audio-fundo" src="audio/som-mato.mp3" loop autoplay></audio>
  <button id="btn-som" aria-label="Ativar/Desativar som ambiente">üîà</button>

  <script>
    new window.VLibras.Widget('https://vlibras.gov.br/app');

    let carrinho = [];

    function adicionarAoCarrinho(produto, preco) {
      const itemExistente = carrinho.find((item) => item.nome === produto);
      if (itemExistente) {
        itemExistente.quantidade++;
      } else {
        carrinho.push({ nome: produto, preco: preco, quantidade: 1 });
      }
      atualizarCarrinho();
    }

    function atualizarCarrinho() {
      const lista = document.getElementById("lista-carrinho");
      lista.innerHTML = "";

      if (carrinho.length === 0) {
        const vazio = document.createElement("li");
        vazio.textContent = "Carrinho vazio.";
        lista.appendChild(vazio);
        document.querySelector(".carrinho-total").textContent = "";
        document.getElementById("btn-finalizar").disabled = true;
        return;
      }

      carrinho.forEach((item) => {
        const li = document.createElement("li");
        li.textContent = `${item.nome} ‚Äî ${item.quantidade}x ‚Äî R$ ${(item.preco * item.quantidade).toFixed(2)}`;
        lista.appendChild(li);
      });

      const total = carrinho.reduce((acc, item) => acc + item.preco * item.quantidade, 0);
      document.querySelector(".carrinho-total").textContent = `Total: R$ ${total.toFixed(2)}`;
      document.getElementById("btn-finalizar").disabled = false;
    }

    function esvaziarCarrinho() {
      carrinho = [];
      atualizarCarrinho();
      esconderAreaPagamento();
    }

    // Mostrar √°rea de pagamento
    function finalizarCompra() {
      if (carrinho.length === 0) {
        alert("Seu carrinho est√° vazio!");
        return;
      }
      document.getElementById("carrinho").classList.add("hidden");
      document.getElementById("area-pagamento").classList.remove("hidden");
      window.scrollTo({ top: 0, behavior: "smooth" });
    }

    // Voltar para carrinho
    function voltarParaCarrinho() {
      document.getElementById("area-pagamento").classList.add("hidden");
      document.getElementById("carrinho").classList.remove("hidden");
    }

    // Submiss√£o do formul√°rio de pagamento
    document.getElementById("form-pagamento").addEventListener("submit", function (e) {
      e.preventDefault();
      alert("Pagamento confirmado! Obrigado pela compra.");
      carrinho = [];
      atualizarCarrinho();
      voltarParaCarrinho();
    });

    // Contraste
    function toggleContraste() {
      document.body.classList.toggle("contraste");
    }

    // Fonte maior
    function aumentarFonte() {
      const style = window.getComputedStyle(document.body).fontSize;
      let size = parseFloat(style);
      if (size < 24) {
        document.body.style.fontSize = size + 2 + "px";
      }
    }

    // Fonte menor
    function diminuirFonte() {
      const style = window.getComputedStyle(document.body).fontSize;
      let size = parseFloat(style);
      if (size > 12) {
        document.body.style.fontSize = size - 2 + "px";
      }
    }

    // Bot√£o voltar ao topo
    const btnTopo = document.getElementById("btnTopo");
    window.onscroll = function () {
      if (document.documentElement.scrollTop > 150) {
        btnTopo.style.display = "block";
      } else {
        btnTopo.style.display = "none";
      }
    };
    btnTopo.addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
    });

    // Som ambiente
    const audio = document.getElementById("audio-fundo");
    const btnSom = document.getElementById("btn-som");
    btnSom.addEventListener("click", () => {
      if (audio.paused) {
        audio.play();
        btnSom.textContent = "üîà";
      } else {
        audio.pause();
        btnSom.textContent = "üîá";
      }
    });

    // Anima√ß√£o boas-vindas
    const welcomeOverlay = document.getElementById("welcome-overlay");
    const btnEnter = document.getElementById("btn-enter");
    btnEnter.addEventListener("click", () => {
      welcomeOverlay.classList.add("fadeout");
      setTimeout(() => {
        welcomeOverlay.style.display = "none";
      }, 1000);
    });

    // Inicializa carrinho
    atualizarCarrinho();
  </script>
</body>
</html>

