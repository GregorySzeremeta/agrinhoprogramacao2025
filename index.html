<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Esta√ß√£o da Terra</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>Esta√ß√£o da Terra</h1>
    <p class="slogan">Do campo √† cidade, colhendo oportunidades</p>
    <nav>
      <button class="btn-verde" onclick="mostrarPagina('produtos')">Loja</button>
      <button class="btn-verde" onclick="mostrarPagina('quiz')">Quiz</button>
      <button class="btn-verde" onclick="mostrarPagina('sobre')">Sobre</button>
      <button class="btn-verde" onclick="mostrarPagina('contato')">Contato</button>
      <button class="btn-verde" onclick="toggleSomAmbiente()">Som do Campo</button>
      <div id="cart-icon" title="Ver carrinho" onclick="mostrarCarrinho()">üõí<span id="cart-count">0</span></div>
    </nav>
    <div class="acessibilidade">
      <button class="btn-acess" onclick="aumentarFonte()" title="Aumentar fonte">A+</button>
      <button class="btn-acess" onclick="diminuirFonte()" title="Diminuir fonte">A-</button>
      <button class="btn-acess" onclick="toggleDaltonico()" title="Modo daltonico">Daltonico</button>
    </div>
  </header>

  <main>
    <!-- LOJA -->
    <section id="produtos" class="pagina">
      <div class="grid-produtos" id="lista-produtos"></div>
    </section>

    <!-- QUIZ -->
    <section id="quiz" class="pagina" style="display:none;">
      <h2>Quiz: Produ√ß√£o do Campo</h2>
      <form id="quiz-form">
        <!-- Perguntas via JS -->
      </form>
      <div id="resultado"></div>
      <div id="placar" style="margin-top:10px; font-weight:bold;"></div>
      <button class="btn-verde" onclick="reiniciarQuiz()">Refazer Quiz</button>
    </section>

    <!-- SOBRE -->
    <section id="sobre" class="pagina" style="display:none;">
      <h2>Sobre a Esta√ß√£o da Terra</h2>
      <p>Somos uma feira online que conecta produtores do campo com voc√™, da forma mais sustent√°vel e acess√≠vel. Nosso objetivo √© oferecer alimentos frescos e naturais, incentivando o consumo consciente e a valoriza√ß√£o da agricultura familiar.</p>
    </section>

    <!-- CONTATO -->
    <section id="contato" class="pagina" style="display:none;">
      <h2>Entre em Contato</h2>
      <form id="contato-form">
        <label for="nome">Nome:</label>
        <input type="text" id="nome" required />

        <label for="email">Email:</label>
        <input type="email" id="email" required />

        <label for="mensagem">Mensagem:</label>
        <textarea id="mensagem" rows="4" required></textarea>

        <button type="submit" class="btn-verde">Enviar</button>
      </form>
      <div id="msg-contato"></div>
    </section>

    <!-- CARRINHO -->
    <section id="carrinho" class="pagina" style="display:none;">
      <h2>Carrinho de Compras</h2>
      <ul id="carrinho-lista"></ul>
      <p class="total" id="total">Total: R$ 0,00</p>
      <button class="btn-verde" onclick="finalizarCompra()">Finalizar Compra</button>
      <button class="btn-verde" onclick="esvaziarCarrinho()">Esvaziar Carrinho</button>
    </section>

    <div id="confete-container"></div>
  </main>

  <!-- Som ambiente (passarinhos cantando) -->
  <audio id="som-ambiente" loop>
    <source src="https://cdn.pixabay.com/download/audio/2022/04/27/audio_ef5a2c84e9.mp3?filename=birds-ambient-6410.mp3" type="audio/mpeg" />
    Seu navegador n√£o suporta √°udio.
  </audio>

  <script>
    // Produtos
    const produtos = [
      { nome: "Mel Org√¢nico", preco: 25, imagem: "https://via.placeholder.com/200?text=Mel" },
      { nome: "Queijo Artesanal", preco: 40, imagem: "https://via.placeholder.com/200?text=Queijo" },
      { nome: "Leite Integral", preco: 6, imagem: "https://via.placeholder.com/200?text=Leite" },
      { nome: "Alface Hidrop√¥nica", preco: 4, imagem: "https://via.placeholder.com/200?text=Alface" },
      { nome: "Tomate Org√¢nico", preco: 8, imagem: "https://via.placeholder.com/200?text=Tomate" },
      { nome: "Morango Fresco", preco: 10, imagem: "https://via.placeholder.com/200?text=Morango" },
      { nome: "Ovos Caipira", preco: 12, imagem: "https://via.placeholder.com/200?text=Ovos" },
      { nome: "Arroz Integral", preco: 18, imagem: "https://via.placeholder.com/200?text=Arroz" },
      { nome: "Feij√£o Preto", preco: 14, imagem: "https://via.placeholder.com/200?text=Feijao" },
      { nome: "Batata Doce", preco: 5, imagem: "https://via.placeholder.com/200?text=Batata" },
      { nome: "Cenoura Org√¢nica", preco: 7, imagem: "https://via.placeholder.com/200?text=Cenoura" },
      { nome: "Piment√£o Colorido", preco: 9, imagem: "https://via.placeholder.com/200?text=Pimentao" },
      { nome: "Cebola Roxa", preco: 6, imagem: "https://via.placeholder.com/200?text=Cebola" },
      { nome: "Melancia", preco: 15, imagem: "https://via.placeholder.com/200?text=Melancia" },
      { nome: "Laranja Bahia", preco: 7, imagem: "https://via.placeholder.com/200?text=Laranja" },
      { nome: "Banana Prata", preco: 5, imagem: "https://via.placeholder.com/200?text=Banana" },
      { nome: "Abacaxi", preco: 12, imagem: "https://via.placeholder.com/200?text=Abacaxi" },
      { nome: "Ch√° de Ervas", preco: 20, imagem: "https://via.placeholder.com/200?text=Cha" },
      { nome: "Farinha de Mandioca", preco: 8, imagem: "https://via.placeholder.com/200?text=Farinha" },
      { nome: "Sementes de Girassol", preco: 5, imagem: "https://via.placeholder.com/200?text=Sementes" }
    ];

    // Perguntas quiz com respostas embaralhadas
    const perguntasQuiz = [
      {
        pergunta: "Qual √© o melhor hor√°rio para colher alface?",
        opcoes: ["Tarde", "Manh√£", "Meia-noite"],
        correta: 1
      },
      {
        pergunta: "Qual √© o tempo m√©dio de produ√ß√£o de mel?",
        opcoes: ["6 meses", "1 m√™s", "2 dias"],
        correta: 0
      },
      {
        pergunta: "Qual alimento √© rico em prote√≠nas vegetais?",
        opcoes: ["Arroz Integral", "Feij√£o Preto", "Mel Org√¢nico"],
        correta: 1
      },
      {
        pergunta: "Qual desses √© um tipo de verdura hidrop√¥nica?",
        opcoes: ["Alface", "Banana", "Cenoura"],
        correta: 0
      },
      {
        pergunta: "Qual fruta √© t√≠pica do clima tropical?",
        opcoes: ["Abacaxi", "Cebola Roxa", "Piment√£o"],
        correta: 0
      },
      {
        pergunta: "Qual destes produtos √© um derivado do leite?",
        opcoes: ["Queijo Artesanal", "Farinha de Mandioca", "Melancia"],
        correta: 0
      },
      {
        pergunta: "O que √© importante para manter a sustentabilidade na agricultura?",
        opcoes: ["Uso excessivo de agrot√≥xicos", "Rota√ß√£o de culturas", "Desmatamento"],
        correta: 1
      },
      {
        pergunta: "Qual desses alimentos √© fonte de carboidratos?",
        opcoes: ["Batata Doce", "Ch√° de Ervas", "Ovos Caipira"],
        correta: 0
      }
    ];

    // Estado do carrinho e quiz
    let carrinho = [];
    let pontuacao = 0;

    // Carregar produtos na loja
    const listaProdutos = document.getElementById("lista-produtos");
    function carregarProdutos() {
      listaProdutos.innerHTML = "";
      produtos.forEach((produto, i) => {
        const div = document.createElement("div");
        div.className = "produto";
        div.innerHTML = `
          <img src="${produto.imagem}" alt="${produto.nome}" />
          <h3>${produto.nome}</h3>
          <p>R$ ${produto.preco.toFixed(2)}</p>
          <button class="btn-verde" onclick="adicionarAoCarrinho(${i})">Adicionar ao carrinho</button>
        `;
        listaProdutos.appendChild(div);
      });
    }

    // Adicionar ao carrinho
    function adicionarAoCarrinho(index) {
      carrinho.push(produtos[index]);
      atualizarCarrinhoIcone();
      alert(`Produto "${produtos[index].nome}" adicionado ao carrinho!`);
    }

    function atualizarCarrinhoIcone() {
      document.getElementById("cart-count").innerText = carrinho.length;
    }

    // Mostrar carrinho
    function mostrarCarrinho() {
      mostrarPagina("carrinho");
      const lista = document.getElementById("carrinho-lista");
      lista.innerHTML = "";
      let total = 0;
      carrinho.forEach((prod, i) => {
        const li = document.createElement("li");
        li.innerHTML = `${prod.nome} - R$ ${prod.preco.toFixed(2)} <button class="btn-verde btn-pequeno" onclick="removerDoCarrinho(${i})">Remover</button>`;
        lista.appendChild(li);
        total += prod.preco;
      });
      document.getElementById("total").innerText = `Total: R$ ${total.toFixed(2)}`;
    }

    // Remover item do carrinho
    function removerDoCarrinho(index) {
      carrinho.splice(index, 1);
      atualizarCarrinhoIcone();
      mostrarCarrinho();
    }

    // Esvaziar carrinho
    function esvaziarCarrinho() {
      if (carrinho.length === 0) {
        alert("Carrinho j√° est√° vazio.");
        return;
      }
      if (confirm("Deseja realmente esvaziar o carrinho?")) {
        carrinho = [];
        atualizarCarrinhoIcone();
        mostrarCarrinho();
      }
    }

    // Finalizar compra
    function finalizarCompra() {
      if (carrinho.length === 0) {
        alert("Seu carrinho est√° vazio.");
        return;
      }
      // Simula√ß√£o de formas de pagamento
      const forma = prompt("Escolha a forma de pagamento:\n1 - Cart√£o de Cr√©dito\n2 - Boleto Banc√°rio\n3 - Pix");
      switch (forma) {
        case "1":
          alert("Pagamento com cart√£o confirmado! Obrigado pela compra.");
          break;
        case "2":
          alert("Boleto gerado! Confira seu e-mail para finalizar o pagamento.");
          break;
        case "3":
          alert("Pix gerado! Fa√ßa o pagamento usando o c√≥digo QR no seu app.");
          break;
        default:
          alert("Forma de pagamento inv√°lida.");
          return;
      }
      carrinho = [];
      atualizarCarrinhoIcone();
      mostrarPagina("produtos");
    }

    // Mostrar p√°gina
    function mostrarPagina(id) {
      document.querySelectorAll(".pagina").forEach((sec) => (sec.style.display = "none"));
      document.getElementById(id).style.display = "block";
      if (id === "produtos") carregarProdutos();
      if (id === "quiz") carregarQuiz();
      if (id === "carrinho") mostrarCarrinho();
      if (id === "contato") limparContato();
      window.scrollTo(0, 0);
    }

    // Quiz
    const quizForm = document.getElementById("quiz-form");
    const resultado = document.getElementById("resultado");
    const placar = document.getElementById("placar");

    function embaralharArray(arr) {
      return arr
        .map((a) => [Math.random(), a])
        .sort((a, b) => a[0] - b[0])
        .map((a) => a[1]);
    }

    function carregarQuiz() {
      resultado.innerText = "";
      placar.innerText = `Pontua√ß√£o: 0 / ${perguntasQuiz.length}`;
      pontuacao = 0;
      quizForm.innerHTML = "";

      perguntasQuiz.forEach((q, i) => {
        const opcoesEmbaralhadas = embaralharArray(
          q.opcoes.map((op, idx) => ({ texto: op, index: idx }))
        );

        const fieldset = document.createElement("fieldset");
        fieldset.className = "quiz-pergunta";

        const legend = document.createElement("legend");
        legend.innerText = `${i + 1}. ${q.pergunta}`;
        fieldset.appendChild(legend);

        opcoesEmbaralhadas.forEach(({ texto, index }) => {
          const label = document.createElement("label");
          label.innerHTML = `
            <input type="radio" name="q${i}" value="${index}" />
            ${texto}
          `;
          fieldset.appendChild(label);
        });

        quizForm.appendChild(fieldset);
      });

      const btnSubmit = document.createElement("button");
      btnSubmit.type = "submit";
      btnSubmit.className = "btn-verde";
      btnSubmit.innerText = "Enviar Respostas";
      quizForm.appendChild(btnSubmit);
    }

    quizForm.addEventListener("submit", function (e) {
      e.preventDefault();
      pontuacao = 0;
      perguntasQuiz.forEach((q, i) => {
        const marcada = quizForm.querySelector(`input[name="q${i}"]:checked`);
        if (marcada && Number(marcada.value) === q.correta) {
          pontuacao++;
        }
      });
      resultado.innerText = `Voc√™ acertou ${pontuacao} de ${perguntasQuiz.length} perguntas.`;
      placar.innerText = `Pontua√ß√£o: ${pontuacao} / ${perguntasQuiz.length}`;
      soltarConfetes();
    });

    function reiniciarQuiz() {
      carregarQuiz();
      resultado.innerText = "";
      placar.innerText = `Pontua√ß√£o: 0 / ${perguntasQuiz.length}`;
    }

    // Confetes
    const confeteContainer = document.getElementById("confete-container");
    function soltarConfetes() {
      for (let i = 0; i < 100; i++) {
        const confete = document.createElement("div");
        confete.className = "confete";
        confete.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 70%)`;
        confete.style.left = `${Math.random() * 100}%`;
        confeteContainer.appendChild(confete);
        setTimeout(() => confete.remove(), 3000);
      }
    }

    // Acessibilidade
    function aumentarFonte() {
      const body = document.body;
      let fontSize = window.getComputedStyle(body).fontSize;
      fontSize = parseFloat(fontSize);
      if (fontSize < 24) body.style.fontSize = fontSize + 2 + "px";
    }

    function diminuirFonte() {
      const body = document.body;
      let fontSize = window.getComputedStyle(body).fontSize;
      fontSize = parseFloat(fontSize);
      if (fontSize > 12) body.style.fontSize = fontSize - 2 + "px";
    }

    function toggleDaltonico() {
      document.body.classList.toggle("daltonico");
    }

    // Som ambiente
    const audio = document.getElementById("som-ambiente");
    function toggleSomAmbiente() {
      if (audio.paused) audio.play();
      else audio.pause();
    }

    // Form contato
    const formContato = document.getElementById("contato-form");
    formContato.addEventListener("submit", (e) => {
      e.preventDefault();
      const nome = document.getElementById("nome").value.trim();
      const email = document.getElementById("email").value.trim();
      const msg = document.getElementById("mensagem").value.trim();

      if (nome && email && msg) {
        document.getElementById("msg-contato").innerText = `Obrigado pelo contato, ${nome}! Responderemos em breve.`;
        formContato.reset();
      } else {
        alert("Por favor, preencha todos os campos.");
      }
    });

    function limparContato() {
      document.getElementById("msg-contato").innerText = "";
      formContato.reset();
    }

    // Inicializa
    mostrarPagina("produtos");
  </script>
</body>
</html>
