<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Quiz Sustentabilidade - Estação Rural</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>Quiz Sustentabilidade</h1>
    <nav>
      <button onclick="location.href='index.html'">Loja</button>
      <button onclick="location.href='quiz.html'">Quiz Sustentabilidade</button>
      <button onclick="location.href='about.html'">Sobre</button>
      <button onclick="location.href='contact.html'">Contato</button>
    </nav>
  </header>

  <main>
    <section id="quiz-section">
      <div id="question-container" class="hide">
        <div id="question">Pergunta</div>
        <div id="answer-buttons" class="btn-grid">
          <!-- Botões das respostas -->
        </div>
      </div>

      <div id="quiz-controls" class="hide">
        <button id="next-btn" class="btn">Próxima</button>
      </div>

      <div id="quiz-results" class="hide">
        <h2>Resultados</h2>
        <p id="score"></p>
        <p id="percentage"></p>
        <button id="restart-btn" class="btn">Reiniciar Quiz</button>
      </div>
    </section>
  </main>

  <script>
    const questions = [
      {
        question: "Qual a importância da rotação de culturas na agricultura?",
        answers: [
          { text: "Evitar o esgotamento do solo", correct: true },
          { text: "Aumentar o uso de pesticidas", correct: false },
          { text: "Diminuir a biodiversidade", correct: false },
          { text: "Reduzir a produção agrícola", correct: false }
        ]
      },
      {
        question: "O que é agricultura sustentável?",
        answers: [
          { text: "Uso de técnicas que preservam o meio ambiente", correct: true },
          { text: "Uso intensivo de fertilizantes químicos", correct: false },
          { text: "Desmatamento para expansão agrícola", correct: false },
          { text: "Cultivo somente de monocultura", correct: false }
        ]
      },
      {
        question: "Qual a função das abelhas no campo?",
        answers: [
          { text: "Polinização das plantas", correct: true },
          { text: "Produção de pesticidas naturais", correct: false },
          { text: "Controle de pragas", correct: false },
          { text: "Irrigação das plantações", correct: false }
        ]
      },
      {
        question: "O que é compostagem?",
        answers: [
          { text: "Transformação de resíduos orgânicos em adubo", correct: true },
          { text: "Uso de adubos químicos", correct: false },
          { text: "Queima de resíduos agrícolas", correct: false },
          { text: "Irrigação natural", correct: false }
        ]
      },
      {
        question: "Como podemos economizar água no campo?",
        answers: [
          { text: "Usando irrigação por gotejamento", correct: true },
          { text: "Irrigando no horário de sol forte", correct: false },
          { text: "Deixando torneiras abertas", correct: false },
          { text: "Irrigando sem planejamento", correct: false }
        ]
      }
    ];

    const questionContainer = document.getElementById("question-container");
    const questionElement = document.getElementById("question");
    const answerButtonsElement = document.getElementById("answer-buttons");
    const nextButton = document.getElementById("next-btn");
    const quizResults = document.getElementById("quiz-results");
    const scoreElement = document.getElementById("score");
    const percentageElement = document.getElementById("percentage");
    const restartButton = document.getElementById("restart-btn");
    const quizControls = document.getElementById("quiz-controls");

    let currentQuestionIndex = 0;
    let score = 0;

    function startQuiz() {
      currentQuestionIndex = 0;
      score = 0;
      quizResults.classList.add("hide");
      questionContainer.classList.remove("hide");
      quizControls.classList.remove("hide");
      nextButton.disabled = true;
      showQuestion();
    }

    function showQuestion() {
      resetState();
      const currentQuestion = questions[currentQuestionIndex];
      questionElement.innerText = currentQuestion.question;

      currentQuestion.answers.forEach(answer => {
        const button = document.createElement("button");
        button.innerText = answer.text;
        button.classList.add("btn-answer");
        if (answer.correct) {
          button.dataset.correct = answer.correct;
        }
        button.addEventListener("click", selectAnswer);
        answerButtonsElement.appendChild(button);
      });

      animateQuestionIn();
    }

    function resetState() {
      nextButton.disabled = true;
      while (answerButtonsElement.firstChild) {
        answerButtonsElement.removeChild(answerButtonsElement.firstChild);
      }
      clearAnimation(questionElement);
    }

    function selectAnswer(e) {
      const selectedButton = e.target;
      const correct = selectedButton.dataset.correct === "true";

      if (correct) {
        selectedButton.classList.add("correct");
        score++;
      } else {
        selectedButton.classList.add("wrong");
      }

      // Desabilitar todos os botões depois da resposta
      Array.from(answerButtonsElement.children).forEach(button => {
        button.disabled = true;
        if (button.dataset.correct === "true") {
          button.classList.add("correct");
        }
      });

      nextButton.disabled = false;
    }

    nextButton.addEventListener("click", () => {
      currentQuestionIndex++;
      if (currentQuestionIndex < questions.length) {
        showQuestion();
      } else {
        showResults();
      }
    });

    function showResults() {
      questionContainer.classList.add("hide");
      quizControls.classList.add("hide");
      quizResults.classList.remove("hide");
      scoreElement.innerText = `Você acertou ${score} de ${questions.length} perguntas.`;
      const perc = ((score / questions.length) * 100).toFixed(2);
      percentageElement.innerText = `Porcentagem: ${perc}%`;
    }

    restartButton.addEventListener("click", startQuiz);

    // Pequena animação de fade in
    function animateQuestionIn() {
      questionElement.style.opacity = 0;
      setTimeout(() => {
        questionElement.style.transition = "opacity 0.5s ease-in";
        questionElement.style.opacity = 1;
      }, 50);
    }

    function clearAnimation(element) {
      element.style.transition = "";
      element.style.opacity = 1;
    }

    startQuiz();
  </script>
</body>
</html>
